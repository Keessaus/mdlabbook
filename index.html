<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Mdlabbook by fredpdavis</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Mdlabbook</h1>
        <p>mdlabbook is a markdown-format lab notebook</p>

        <p class="view"><a href="https://github.com/fredpdavis/mdlabbook">View the Project on GitHub <small>fredpdavis/mdlabbook</small></a></p>


        <ul>
          <li><a href="https://github.com/fredpdavis/mdlabbook/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/fredpdavis/mdlabbook/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/fredpdavis/mdlabbook">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="mdlabbook-is-a-markdown-format-lab-notebook" class="anchor" href="#mdlabbook-is-a-markdown-format-lab-notebook" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>mdlabbook is a markdown-format lab notebook</h1>

<p>Author: <a href="http://fredpdavis.com">Fred P. Davis</a>,
<a href="http://www.niams.nih.gov/">NIH/NIAMS</a></p>

<h2>
<a id="summary" class="anchor" href="#summary" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Summary</h2>

<p>mdlabbook helps maintain a lab notebook in the text-based markdown format
that you can edit in any text editor, link to images or other files, and 
automatically converts to webpages you can view in a web browser and
a PDF file for printing.</p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Write notebook entries in a simple text format called
<a href="http://pandoc.org/README.html#pandocs-markdown">pandoc </a>
<a href="https://daringfireball.net/projects/markdown/">markdown</a>
</li>
<li>Compatible with any text editor</li>
<li><p>Write equations with LaTeX syntax</p></li>
<li><p>Creates webpages for viewing in a web browser</p></li>
<li>Creates PDF for archiving</li>
<li>Simple file layout compatible with any backup/sharing system.</li>
<li>Searchable with standard tools like grep or Mac OS's Spotlight.</li>
</ul>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<ol>
<li><p>Download mdlabbook from
<a href="https://github.com/fredpdavis/mdlabbook/archive/master.zip">this link</a> or
using git: <code>git clone https://github.com/fredpdavis/mdlabbook.git</code></p></li>
<li>
<p>Add an alias to your shell rc file so you can call the program easily
from anywhere</p>

<ul>
<li><p>You probably use the bash shell. if so, add this line to (or create)
the <code>~/.bashrc</code> file and then run <code>source ~/.bashrc</code>:
  <code>alias mdlabbook='perl /FULLPATH/TO/THE/MDLABBOOK/src/mdlabbook.pl'</code></p></li>
<li><p>If you use cshrc, add this line to (or create) the ~/.cshrc file and
then run <code>source ~/.cshrc</code>:
  <code>alias mdlabbook perl /FULLPATH/TO/THE/MDLABBOOK/src/mdlabbook.pl</code></p></li>
</ul>
</li>
<li><p>Install <a href="http://pandoc.org">pandoc</a>. After installing pandoc, also follow
their instructions to install LaTeX, as you'll need it to create PDFs.</p></li>
<li><p>Optional: Install <a href="http://vim.org">vim</a> if you don't already have it -- vim
is the default editor, though you can specify another editor in the config
file (see below) if you prefer.</p></li>
</ol>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Started</h2>

<ol>
<li>
<p>Make a config file describing your notebook options -- start with the example
file provided (example_mdlabbook.config) or copy these lines into a new file:</p>

<pre><code># notebook directory
-dir ~/labbook

# preferred editor (default is vim)
-editor vim

# author name
-author "Fred P. Davis, NIH/NIAMS"

# notebook title
-title "Lab Notebook"
</code></pre>
</li>
<li>
<p>Type <code>mdlabbook -c CONFIGFILE</code>, replacing CONFIGFILE with the location of
your config file, to open today's entry with vim. Write your notes in
<a href="http://pandoc.org/README.html#pandocs-markdown">pandoc markdown syntax</a>.
Here's a short example:</p>

<pre><code>---
title: lab notebook
author: Fred P. Davis
date: March 28, 2016
---

# Today's agenda

1. prep mdlabbook for release
2. a little bit of this
3. a little bit of that

# mdlabbook

![Embed an image](files/my_favorite_image.pdf)

## coding

- combined all to single perl script
- added interface to config file option
- [Pandoc](http://pandoc.org) understands LaTeX! $e = mc^2$
- [Pandoc](http://pandoc.org) also understands formatted table

Project      Date     Status
---------    ------   -------------
project1     2015     completed
project2     2016     in progress
</code></pre>
</li>
<li><p>When you exit the vim session, an html version of the notebook will be
generated. Open the index.html file in your notebook directory to view a
calendar linked to notebook entries.</p></li>
<li><p>To generate a PDF version: <code>mdlabbook -c CONFIGFILE -p</code> will create
wholelabbook.pdf in your notebook directory.</p></li>
</ol>

<h2>
<a id="detailed-usage" class="anchor" href="#detailed-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Detailed usage</h2>

<pre><code>USAGE: mdlabbook [OPTIONS] -c CONFIGFILE

-c CONFIGFILE   ONLY REQUIRED OPTION: see example_mdlabbook.config

-h              describe usage
-e YEARMODA     open/create a specific entry, eg, 20160322 for March 22, 2016
                - if -e not specified, will open today's entry
-w              convert to webpages (automatically runs after editing an entry)
-p              convert to PDF
-f FILE1 FILE2... moves files to files directory of today's notebook
-n              don't add prefix to filename before moving (default: date)

-s PDF          crops 2-page PDF scans into individual page PNG files
                - requires imagemagick
                - defaults work for 300dpi 8.5x11 2-page scan of 5.5x8 green NIH
                  notebooks (Federal Supply Service, GPO 7530-00-286-6207)
-b PAGENUM      first physical page number in the PDF scan (default: 1)
-l cropspec     left page cropping spec (default: 1600x2350+250+0)
-r cropspec     right page cropping spec (default: 1600x2350+1750+0)
-o out_prefix   Prefix for cropped PNG file names (default "nb_p")
-x CROPSPECFILE file listing cropping specs for individual pages, listed by
                physical page number, eg: "1 1600x2350+250+0"
</code></pre>

<h2>
<a id="miscellaneous-details" class="anchor" href="#miscellaneous-details" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Miscellaneous Details</h2>

<ul>
<li><p>Notebook entries are stored one file per day in the following layout:
<code>notebookdirectory/year/yearmonth/yearmonthday.md</code></p></li>
<li><p>Stores images or other files by month:
<code>notebookdirectory/year/yearmonth/files</code></p></li>
<li>
<p>bash alias to search the notebook (change NOTEBOOKDIRECTORY to the actual directory path):</p>

<pre><code>function nbgrep() { grep "$@" NOTEBOOKDIRECTORY/20*/*/*md;}
</code></pre>
</li>
<li>
<p>csh alias to search the notebook (change NOTEBOOKDIRECTORY to the actual directory path):</p>

<pre><code>alias nbgrep 'grep \!:* NOTEBOOKDIRECTORY/20*/*/*md'
</code></pre>
</li>
<li>
<p>Add these lines to your ~/.vimrc file (changing NOTEBOOKPATH to the full path
of your notebook directory) to get a shortcut for opening notebook entries:</p>

<pre><code>" Add command :NBopen yearmonthdate (eg, 20160328) to open an entry

function! NBopen(nbtarget)
   let t_nbyear=strpart(a:nbtarget, 0, 4)
   let t_nbmonth=strpart(a:nbtarget, 0, 6)
   let t_nbfile=a:nbtarget.".md"
   let target_path="NOTEBOOKPATH/".t_nbyear."/".t_nbmonth."/".t_nbfile
   exec "sp ".target_path
endfunction
command! -nargs=1 NBopen call NBopen(&lt;f-args&gt;)

" If cursor is over a yearmonthdate string in your file, F1 will open it
map &lt;F1&gt; :NBopen &lt;C-R&gt;&lt;C-W&gt;&lt;CR&gt;
</code></pre>
</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/fredpdavis">fredpdavis</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
